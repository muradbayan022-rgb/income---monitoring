<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Murad Tracker Fixed</title>
    <style>
        :root { --bg: #0b0b0b; --card: #1a1a1a; --green: #48bb78; --red: #f56565; --blue: #4299e1; --gray: #a0aec0; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: #fff; margin: 0; padding: 20px; }
        .card { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #2d3748; }
        .bal-val { font-size: 2.2em; font-weight: bold; color: var(--blue); text-align: center; }
        .summary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .sum-card { padding: 12px; border-radius: 12px; text-align: center; font-size: 0.9em; border: 1px solid #2d3748; }
        input, select, button { width: 100%; padding: 15px; margin: 8px 0; border-radius: 10px; border: 1px solid #2d3748; background: #2d3748; color: #fff; box-sizing: border-box; font-size: 16px; }
        button { font-weight: bold; cursor: pointer; border: none; }
        .btn-inc { background: var(--green); }
        .btn-exp { background: var(--red); }
        .log-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #2d3748; background: #1a1a1a; margin-bottom: 8px; border-radius: 10px; }
        .log-date { font-size: 0.7em; color: #718096; display: block; }
    </style>
</head>
<body>
    <h2 style="text-align:center; color:var(--blue)">MURAD TRACKER</h2>
    
    <div class="card">
        <div style="font-size: 0.8em; color: var(--gray); text-align: center;">KABUUANG PERA</div>
        <div id="total" class="bal-val">‚Ç± 0.00</div>
    </div>

    <div class="summary-grid">
        <div class="sum-card" style="color:var(--green)">Kita Ngayon<br><b id="today-inc">‚Ç± 0</b></div>
        <div class="sum-card" style="color:var(--red)">Gastos Ngayon<br><b id="today-exp">‚Ç± 0</b></div>
    </div>

    <div class="card">
        <input type="text" id="desc" placeholder="Anong klaseng pera ito?">
        <input type="number" id="amt" placeholder="Magkano?" inputmode="decimal">
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <select id="wallet">
                <option value="cash">üíµ Cash</option>
                <option value="gcash">üì± GCash</option>
            </select>
            <select id="category">
                <option value="üí∞ Income">üí∞ Income</option>
                <option value="üçî Pagkain">üçî Pagkain</option>
                <option value="üöó Pamasahe">üöó Pamasahe</option>
                <option value="üí° Bills">üí° Bills</option>
                <option value="‚ú® Iba pa">‚ú® Iba pa</option>
            </select>
        </div>

        <div style="display:flex; gap:10px">
            <button class="btn-inc" onclick="handleTransaction('income')">INCOME</button>
            <button class="btn-exp" onclick="handleTransaction('expense')">GASTOS</button>
        </div>
    </div>

    <div style="display:flex; justify-content:space-between; align-items:center; color:var(--gray)">
        <h4>HISTORY LOGS</h4>
        <button onclick="clearData()" style="background:none; color:var(--red); width:auto; font-size:0.8em;">Clear All</button>
    </div>
    <div id="logs"></div>

    <script>
        // Load Database
        let db = JSON.parse(localStorage.getItem('murad_data')) || { cash: 0, gcash: 0, logs: [] };

        function updateDisplay() {
            // Update Balance
            const total = db.cash + db.gcash;
            document.getElementById('total').innerText = "‚Ç± " + total.toLocaleString(undefined, {minimumFractionDigits: 2});
            
            // Update Today's Summary
            const today = new Date().toLocaleDateString();
            let inc = 0, exp = 0;
            db.logs.forEach(l => {
                if(l.date === today) {
                    if(l.type === 'income') inc += l.amount;
                    else exp += l.amount;
                }
            });
            document.getElementById('today-inc').innerText = "‚Ç± " + inc.toLocaleString();
            document.getElementById('today-exp').innerText = "‚Ç± " + exp.toLocaleString();

            // Render Logs
            const logBox = document.getElementById('logs');
            logBox.innerHTML = db.logs.map((l, i) => `
                <div class="log-item">
                    <div>
                        <b>${l.desc}</b> <small style="color:var(--blue)">[${l.wallet.toUpperCase()}]</small>
                        <span class="log-date">${l.cat} | ${l.time}</span>
                    </div>
                    <div style="color:${l.type === 'income' ? 'var(--green)' : 'var(--red)'}; font-weight:bold; margin-right:10px;">
                        ${l.type === 'income' ? '+' : '-'} ‚Ç±${l.amount.toLocaleString()}
                    </div>
                    <button onclick="deleteItem(${i})" style="background:none; width:auto; padding:0; font-size:1.2em;">üóëÔ∏è</button>
                </div>
            `).join('');

            // Save to Storage
            localStorage.setItem('murad_data', JSON.stringify(db));
        }

        function handleTransaction(type) {
            const descInput = document.getElementById('desc');
            const amtInput = document.getElementById('amt');
            const wallet = document.getElementById('wallet').value;
            const cat = document.getElementById('category').value;

            const amount = parseFloat(amtInput.value);
            const description = descInput.value.trim() || cat;

            if(!amtInput.value || isNaN(amount) || amount <= 0) {
                alert("Pakilagay ang tamang halaga.");
                return;
            }

            // Update Math
            if(type === 'income') {
                db[wallet] += amount;
            } else {
                db[wallet] -= amount;
            }

            // Add Log
            const now = new Date();
            db.logs.unshift({
                desc: description,
                amount: amount,
                wallet: wallet,
                cat: cat,
                type: type,
                date: now.toLocaleDateString(),
                time: now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
            });

            // Reset Inputs
            descInput.value = '';
            amtInput.value = '';
            
            updateDisplay();
        }

        function deleteItem(index) {
            const item = db.logs[index];
            if(item.type === 'income') db[item.wallet] -= item.amount;
            else db[item.wallet] += item.amount;
            db.logs.splice(index, 1);
            updateDisplay();
        }

        function clearData() {
            if(confirm("Burahin lahat?")) {
                db = { cash: 0, gcash: 0, logs: [] };
                updateDisplay();
            }
        }

        // Initial Run
        updateDisplay();
    </script>
</body>
</html>